import{_ as i,o as r,c as d,a as n}from"./index-86270c7c.js";const c={data(){return{peerConnection:null,localStream:null,remoteStream:null,isInCall:!1}},methods:{async startCall(){const e=await navigator.mediaDevices.getUserMedia({audio:!0});console.log(e),this.localStream=e,this.$refs.localAudio.srcObject=e,this.peerConnection=new RTCPeerConnection,this.peerConnection.addStream(e),this.peerConnection.onaddstream=t=>{this.remoteStream=t.stream,this.$refs.remoteAudio.srcObject=t.stream};const s=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(s),this.isInCall=!0,this.$refs.remoteAudio.addEventListener("volumechange",()=>{const t=this.$refs.remoteAudio;t.muted?t.setSinkId(""):t.setSinkId("earpiece")})},endCall(){this.peerConnection.close(),this.localStream.getTracks().forEach(e=>e.stop()),this.isInCall=!1}}},u=["muted"],m=["muted"],C=["disabled"],f=["disabled"];function h(e,s,t,p,o,l){return r(),d("div",null,[n("audio",{ref:"remoteAudio",muted:!o.isInCall},null,8,u),n("audio",{ref:"localAudio",muted:!o.isInCall},null,8,m),n("button",{onClick:s[0]||(s[0]=(...a)=>l.startCall&&l.startCall(...a)),disabled:o.isInCall},"Start Call",8,C),n("button",{onClick:s[1]||(s[1]=(...a)=>l.endCall&&l.endCall(...a)),disabled:!o.isInCall},"End Call",8,f)])}const b=i(c,[["render",h]]);export{b as default};
